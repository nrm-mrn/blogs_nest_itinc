{"version":3,"sources":["../../../../../src/modules/user-accounts/guards/decorators/extract-user-from-request.decorator.ts"],"sourcesContent":["import { createParamDecorator, ExecutionContext } from '@nestjs/common';\nimport { UserContextDto } from '../dto/user-context.dto';\nimport { DomainException } from 'src/core/exceptions/domain-exceptions';\nimport { DomainExceptionCode } from 'src/core/exceptions/domain-exception-codes';\n\nexport const ExtractUserFromRequest = createParamDecorator(\n  (data: unknown, context: ExecutionContext): UserContextDto => {\n    const request = context.switchToHttp().getRequest();\n\n    const user = request.user as UserContextDto;\n\n    if (!user) {\n      throw new DomainException({\n        code: DomainExceptionCode.InternalServerError,\n        message: 'there is no user in the request object!',\n      });\n    }\n\n    return user;\n  },\n);\n"],"names":["ExtractUserFromRequest","createParamDecorator","data","context","request","switchToHttp","getRequest","user","DomainException","code","DomainExceptionCode","InternalServerError","message"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBAL0C;kCAEvB;sCACI;AAE7B,MAAMA,yBAAyBC,IAAAA,4BAAoB,EACxD,CAACC,MAAeC;IACd,MAAMC,UAAUD,QAAQE,YAAY,GAAGC,UAAU;IAEjD,MAAMC,OAAOH,QAAQG,IAAI;IAEzB,IAAI,CAACA,MAAM;QACT,MAAM,IAAIC,iCAAe,CAAC;YACxBC,MAAMC,yCAAmB,CAACC,mBAAmB;YAC7CC,SAAS;QACX;IACF;IAEA,OAAOL;AACT"}