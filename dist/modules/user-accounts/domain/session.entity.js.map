{"version":3,"sources":["../../../../src/modules/user-accounts/domain/session.entity.ts"],"sourcesContent":["import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { CreateSessionDomainDto } from './dto/create-session.domain.dto';\nimport mongoose, { HydratedDocument, Model } from 'mongoose';\n\n@Schema({ timestamps: true })\nexport class DeviceAuthSession {\n  @Prop({ type: mongoose.Schema.Types.ObjectId, required: true })\n  _id: mongoose.Types.ObjectId;\n\n  @Prop({ type: String, required: true })\n  userId: string;\n\n  @Prop({ type: Date, required: true })\n  iat: Date;\n\n  @Prop({ type: Date, required: true })\n  expiration: Date;\n\n  @Prop({ type: String, required: true })\n  ip: string;\n\n  @Prop({ type: String, required: true })\n  title: string; //NOTE: user-agent header\n\n  createdAt: string;\n  updatedAt: string;\n\n  static createSession(dto: CreateSessionDomainDto) {\n    const session = new this();\n    session._id = dto.deviceId;\n    session.userId = dto.userId;\n    session.iat = new Date(dto.iat);\n    session.ip = dto.ip;\n    session.title = dto.title;\n    session.expiration = dto.expiration;\n\n    return session as SessionDocument;\n  }\n}\n\nexport type SessionDocument = HydratedDocument<DeviceAuthSession>;\nexport type SessionModelType = Model<SessionDocument> &\n  typeof DeviceAuthSession;\nexport const SessionSchema = SchemaFactory.createForClass(DeviceAuthSession);\n\nSessionSchema.loadClass(DeviceAuthSession);\n"],"names":["DeviceAuthSession","SessionSchema","createSession","dto","session","_id","deviceId","userId","iat","Date","ip","title","expiration","type","mongoose","Schema","Types","ObjectId","required","String","timestamps","SchemaFactory","createForClass","loadClass"],"mappings":";;;;;;;;;;;QAKaA;eAAAA;;QAsCAC;eAAAA;;;0BA3C+B;kEAEM;;;;;;;;;;;;;;;AAG3C,IAAA,AAAMD,oBAAN,MAAMA;IAsBX,OAAOE,cAAcC,GAA2B,EAAE;QAChD,MAAMC,UAAU,IAAI,IAAI;QACxBA,QAAQC,GAAG,GAAGF,IAAIG,QAAQ;QAC1BF,QAAQG,MAAM,GAAGJ,IAAII,MAAM;QAC3BH,QAAQI,GAAG,GAAG,IAAIC,KAAKN,IAAIK,GAAG;QAC9BJ,QAAQM,EAAE,GAAGP,IAAIO,EAAE;QACnBN,QAAQO,KAAK,GAAGR,IAAIQ,KAAK;QACzBP,QAAQQ,UAAU,GAAGT,IAAIS,UAAU;QAEnC,OAAOR;IACT;AACF;;;QAhCUS,MAAMC,kBAAQ,CAACC,MAAM,CAACC,KAAK,CAACC,QAAQ;QAAEC,UAAU;;uGAC1C,mDAAA,MAAM,uDAAN,MAAM;;;;QAEZL,MAAMM;QAAQD,UAAU;;;;;;QAGxBL,MAAMJ;QAAMS,UAAU;;;;;;QAGtBL,MAAMJ;QAAMS,UAAU;;;;;;QAGtBL,MAAMM;QAAQD,UAAU;;;;;;QAGxBL,MAAMM;QAAQD,UAAU;;;;;;QAjBxBE,YAAY;;;AAuCf,MAAMnB,gBAAgBoB,uBAAa,CAACC,cAAc,CAACtB;AAE1DC,cAAcsB,SAAS,CAACvB"}