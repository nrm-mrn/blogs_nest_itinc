{"version":3,"sources":["../../../src/modules/user-accounts/user-accounts.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\nimport { MongooseModule } from '@nestjs/mongoose';\nimport { User, UserSchema } from './domain/user.entity';\nimport { UsersController } from './api/users.controller';\nimport { UsersService } from './application/users.service';\nimport { UsersQueryRepository } from './infrastructure/query/users.query-repository';\nimport { UsersRepository } from './infrastructure/users.repository';\nimport { BasicAuthGuard } from './guards/basic/basic-auth.guard';\nimport { HashService } from './application/passHash.service';\nimport { JwtModule } from '@nestjs/jwt';\nimport { ConfigModule, ConfigService } from '@nestjs/config';\nimport { ConfigurationType } from '../config/config.module';\nimport { DeviceAuthSession, SessionSchema } from './domain/session.entity';\nimport { AuthController } from './api/auth.controller';\nimport { DevicesSecurityController } from './api/devices-security.controller';\nimport { JwtAuthGuard } from './guards/bearer/jwt-auth.guard';\nimport { RefreshTokenGuard } from './guards/bearer/jwt-refresh-token-guard';\nimport { EmailTemplates } from '../notifications/email.templates';\nimport { EmailService } from '../notifications/email.service';\nimport { AuthService } from './application/auth.service';\nimport { SessionsService } from './application/devices-security.service';\nimport { MailerModule } from '@nestjs-modules/mailer';\nimport { NotificationsModule } from '../notifications/notifications.module';\nimport { DevicesSecurityRepository } from './infrastructure/devices-security.repository';\nimport { SessionsQueryRepository } from './infrastructure/query/devices-security.query-repository';\n\n@Module({\n  imports: [\n    JwtModule.registerAsync({\n      imports: [ConfigModule],\n      useFactory: async (configService: ConfigService<ConfigurationType>) => {\n        return {\n          secret: configService.get('jwtSecret'),\n          signOptions: {\n            expiresIn: `${configService.get('jwtExpiration')}m`,\n          },\n        };\n      },\n      inject: [ConfigService],\n    }),\n    NotificationsModule,\n    MongooseModule.forFeature([{ name: User.name, schema: UserSchema }]),\n    MongooseModule.forFeature([\n      { name: DeviceAuthSession.name, schema: SessionSchema },\n    ]),\n  ],\n  controllers: [UsersController, AuthController, DevicesSecurityController],\n  providers: [\n    UsersService,\n    UsersQueryRepository,\n    UsersRepository,\n    BasicAuthGuard,\n    JwtAuthGuard,\n    RefreshTokenGuard,\n    HashService,\n    EmailTemplates,\n    EmailService,\n    AuthService,\n    SessionsService,\n    DevicesSecurityRepository,\n    SessionsQueryRepository,\n  ],\n  exports: [BasicAuthGuard, JwtAuthGuard],\n})\nexport class UserAccountsModule {}\n"],"names":["UserAccountsModule","imports","JwtModule","registerAsync","ConfigModule","useFactory","configService","secret","get","signOptions","expiresIn","inject","ConfigService","NotificationsModule","MongooseModule","forFeature","name","User","schema","UserSchema","DeviceAuthSession","SessionSchema","controllers","UsersController","AuthController","DevicesSecurityController","providers","UsersService","UsersQueryRepository","UsersRepository","BasicAuthGuard","JwtAuthGuard","RefreshTokenGuard","HashService","EmailTemplates","EmailService","AuthService","SessionsService","DevicesSecurityRepository","SessionsQueryRepository","exports"],"mappings":";;;;+BAgEaA;;;eAAAA;;;wBAhEU;0BACQ;4BACE;iCACD;8BACH;sCACQ;iCACL;gCACD;iCACH;qBACF;wBACkB;+BAEK;gCAClB;2CACW;8BACb;sCACK;gCACH;8BACF;6BACD;wCACI;qCAEI;2CACM;gDACF;;;;;;;AAwCjC,IAAA,AAAMA,qBAAN,MAAMA;AAAoB;;;QArC/BC,SAAS;YACPC,cAAS,CAACC,aAAa,CAAC;gBACtBF,SAAS;oBAACG,oBAAY;iBAAC;gBACvBC,YAAY,OAAOC;oBACjB,OAAO;wBACLC,QAAQD,cAAcE,GAAG,CAAC;wBAC1BC,aAAa;4BACXC,WAAW,GAAGJ,cAAcE,GAAG,CAAC,iBAAiB,CAAC,CAAC;wBACrD;oBACF;gBACF;gBACAG,QAAQ;oBAACC,qBAAa;iBAAC;YACzB;YACAC,wCAAmB;YACnBC,wBAAc,CAACC,UAAU,CAAC;gBAAC;oBAAEC,MAAMC,gBAAI,CAACD,IAAI;oBAAEE,QAAQC,sBAAU;gBAAC;aAAE;YACnEL,wBAAc,CAACC,UAAU,CAAC;gBACxB;oBAAEC,MAAMI,gCAAiB,CAACJ,IAAI;oBAAEE,QAAQG,4BAAa;gBAAC;aACvD;SACF;QACDC,aAAa;YAACC,gCAAe;YAAEC,8BAAc;YAAEC,oDAAyB;SAAC;QACzEC,WAAW;YACTC,0BAAY;YACZC,0CAAoB;YACpBC,gCAAe;YACfC,8BAAc;YACdC,0BAAY;YACZC,uCAAiB;YACjBC,4BAAW;YACXC,8BAAc;YACdC,0BAAY;YACZC,wBAAW;YACXC,uCAAe;YACfC,oDAAyB;YACzBC,uDAAuB;SACxB;QACDC,SAAS;YAACV,8BAAc;YAAEC,0BAAY;SAAC"}