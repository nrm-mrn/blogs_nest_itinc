{"version":3,"sources":["../../../../../../src/modules/bloggers-platform/comments/api/view-dto/comment-view.dto.ts"],"sourcesContent":["import {\n  CommentLikeDocument,\n  CommentLikeStatus,\n} from '../../domain/comment-like.entity';\nimport { CommentDocument } from '../../domain/comment.entity';\n\nexport class LikesInfoViewModel {\n  likesCount: number;\n  dislikesCount: number;\n  myStatus: CommentLikeStatus;\n}\n\nexport class CommentatorInfoViewModel {\n  userId: string;\n  userLogin: string;\n}\n\nexport class CommentViewDto {\n  id: string;\n  content: string;\n  commentatorInfo: CommentatorInfoViewModel;\n  createdAt: string;\n  likesInfo: LikesInfoViewModel;\n\n  static mapToView(comm: CommentDocument): CommentViewDto {\n    const dto = new CommentViewDto();\n    dto.id = comm._id.toString();\n    dto.content = comm.content;\n    dto.commentatorInfo = {\n      userId: comm.commentatorInfo.userId,\n      userLogin: comm.commentatorInfo.userLogin,\n    };\n    dto.createdAt = comm.createdAt.toISOString();\n    dto.likesInfo = {\n      myStatus: CommentLikeStatus.NONE,\n      likesCount: comm.likesCount,\n      dislikesCount: comm.dislikesCount,\n    };\n    return dto;\n  }\n\n  public setLike(likes: Map<string, CommentLikeStatus> | CommentLikeDocument) {\n    if (likes instanceof Map) {\n      const likeStatus = likes.get(this.id);\n      if (likeStatus) {\n        this.likesInfo.myStatus = likeStatus;\n      }\n      return;\n    }\n    this.likesInfo.myStatus = likes.status;\n  }\n}\n"],"names":["CommentViewDto","CommentatorInfoViewModel","LikesInfoViewModel","mapToView","comm","dto","id","_id","toString","content","commentatorInfo","userId","userLogin","createdAt","toISOString","likesInfo","myStatus","CommentLikeStatus","NONE","likesCount","dislikesCount","setLike","likes","Map","likeStatus","get","status"],"mappings":";;;;;;;;;;;QAiBaA;eAAAA;;QALAC;eAAAA;;QANAC;eAAAA;;;mCAHN;AAGA,IAAA,AAAMA,qBAAN,MAAMA;AAIb;AAEO,IAAA,AAAMD,2BAAN,MAAMA;AAGb;AAEO,IAAA,AAAMD,iBAAN,MAAMA;IAOX,OAAOG,UAAUC,IAAqB,EAAkB;QACtD,MAAMC,MAAM,IAAIL;QAChBK,IAAIC,EAAE,GAAGF,KAAKG,GAAG,CAACC,QAAQ;QAC1BH,IAAII,OAAO,GAAGL,KAAKK,OAAO;QAC1BJ,IAAIK,eAAe,GAAG;YACpBC,QAAQP,KAAKM,eAAe,CAACC,MAAM;YACnCC,WAAWR,KAAKM,eAAe,CAACE,SAAS;QAC3C;QACAP,IAAIQ,SAAS,GAAGT,KAAKS,SAAS,CAACC,WAAW;QAC1CT,IAAIU,SAAS,GAAG;YACdC,UAAUC,oCAAiB,CAACC,IAAI;YAChCC,YAAYf,KAAKe,UAAU;YAC3BC,eAAehB,KAAKgB,aAAa;QACnC;QACA,OAAOf;IACT;IAEOgB,QAAQC,KAA2D,EAAE;QAC1E,IAAIA,iBAAiBC,KAAK;YACxB,MAAMC,aAAaF,MAAMG,GAAG,CAAC,IAAI,CAACnB,EAAE;YACpC,IAAIkB,YAAY;gBACd,IAAI,CAACT,SAAS,CAACC,QAAQ,GAAGQ;YAC5B;YACA;QACF;QACA,IAAI,CAACT,SAAS,CAACC,QAAQ,GAAGM,MAAMI,MAAM;IACxC;AACF"}