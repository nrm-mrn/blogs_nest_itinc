{"version":3,"sources":["../../../../../../src/modules/bloggers-platform/posts/api/view-dto/posts.view-dto.ts"],"sourcesContent":["import { PostDocument } from '../../domain/post.entity';\n\nexport enum PostLikeStatus {\n  LIKE = 'Like',\n  DISLIKE = 'Dislike',\n  NONE = 'None',\n}\n\nexport class LikeDetailsViewModel {\n  userId: string;\n  login: string;\n  addedAt: string;\n}\n\nexport class ExtendedLikesInfoViewModel {\n  likesCount: number;\n  dislikesCount: number;\n  myStatus: PostLikeStatus;\n  newestLikes: LikeDetailsViewModel[];\n}\n\nexport class PostViewDto {\n  id: string;\n  title: string;\n  shortDescription: string;\n  content: string;\n  blogId: string;\n  blogName: string;\n  createdAt: string;\n  extendedLikesInfo: ExtendedLikesInfoViewModel;\n\n  static mapToView(post: PostDocument): PostViewDto {\n    const dto = new PostViewDto();\n    dto.id = post._id.toString();\n    dto.title = post.title;\n    dto.shortDescription = post.shortDescription;\n    dto.content = post.content;\n    dto.blogId = post.blogId;\n    dto.blogName = post.blogName;\n    dto.createdAt = post.createdAt.toISOString();\n    dto.extendedLikesInfo = {\n      ...post.extendedLikesInfo,\n      myStatus: PostLikeStatus.NONE,\n    };\n    return dto;\n  }\n\n  public setLike(likesMap: Map<string, PostLikeStatus>) {\n    const likeStatus = likesMap.get(this.id);\n    if (likeStatus) {\n      this.extendedLikesInfo.myStatus = likeStatus;\n    }\n  }\n}\n"],"names":["ExtendedLikesInfoViewModel","LikeDetailsViewModel","PostLikeStatus","PostViewDto","mapToView","post","dto","id","_id","toString","title","shortDescription","content","blogId","blogName","createdAt","toISOString","extendedLikesInfo","myStatus","setLike","likesMap","likeStatus","get"],"mappings":";;;;;;;;;;;QAcaA;eAAAA;;QANAC;eAAAA;;QANDC;eAAAA;;QAmBCC;eAAAA;;;AAnBN,IAAA,AAAKD,wCAAAA;;;;WAAAA;;AAML,IAAA,AAAMD,uBAAN,MAAMA;AAIb;AAEO,IAAA,AAAMD,6BAAN,MAAMA;AAKb;AAEO,IAAA,AAAMG,cAAN,MAAMA;IAUX,OAAOC,UAAUC,IAAkB,EAAe;QAChD,MAAMC,MAAM,IAAIH;QAChBG,IAAIC,EAAE,GAAGF,KAAKG,GAAG,CAACC,QAAQ;QAC1BH,IAAII,KAAK,GAAGL,KAAKK,KAAK;QACtBJ,IAAIK,gBAAgB,GAAGN,KAAKM,gBAAgB;QAC5CL,IAAIM,OAAO,GAAGP,KAAKO,OAAO;QAC1BN,IAAIO,MAAM,GAAGR,KAAKQ,MAAM;QACxBP,IAAIQ,QAAQ,GAAGT,KAAKS,QAAQ;QAC5BR,IAAIS,SAAS,GAAGV,KAAKU,SAAS,CAACC,WAAW;QAC1CV,IAAIW,iBAAiB,GAAG;YACtB,GAAGZ,KAAKY,iBAAiB;YACzBC,QAAQ;QACV;QACA,OAAOZ;IACT;IAEOa,QAAQC,QAAqC,EAAE;QACpD,MAAMC,aAAaD,SAASE,GAAG,CAAC,IAAI,CAACf,EAAE;QACvC,IAAIc,YAAY;YACd,IAAI,CAACJ,iBAAiB,CAACC,QAAQ,GAAGG;QACpC;IACF;AACF"}