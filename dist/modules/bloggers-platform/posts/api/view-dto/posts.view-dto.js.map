{"version":3,"sources":["../../../../../../src/modules/bloggers-platform/posts/api/view-dto/posts.view-dto.ts"],"sourcesContent":["import { PostDocument } from '../../domain/post.entity';\nimport { PostLikeDocument } from '../../domain/postLike.entity';\n\nexport enum PostLikeStatus {\n  LIKE = 'Like',\n  DISLIKE = 'Dislike',\n  NONE = 'None',\n}\n\nexport class LikeDetailsViewModel {\n  userId: string;\n  login: string;\n  addedAt: string;\n}\n\nexport class ExtendedLikesInfoViewModel {\n  likesCount: number;\n  dislikesCount: number;\n  myStatus: PostLikeStatus;\n  newestLikes: LikeDetailsViewModel[];\n}\n\nexport class PostViewDto {\n  id: string;\n  title: string;\n  shortDescription: string;\n  content: string;\n  blogId: string;\n  blogName: string;\n  createdAt: string;\n  extendedLikesInfo: ExtendedLikesInfoViewModel;\n\n  static mapToView(post: PostDocument): PostViewDto {\n    const dto = new PostViewDto();\n    dto.id = post._id.toString();\n    dto.title = post.title;\n    dto.shortDescription = post.shortDescription;\n    dto.content = post.content;\n    dto.blogId = post.blogId;\n    dto.blogName = post.blogName;\n    dto.createdAt = post.createdAt.toISOString();\n    dto.extendedLikesInfo = {\n      likesCount: post.extendedLikesInfo.likesCount,\n      dislikesCount: post.extendedLikesInfo.dislikesCount,\n      newestLikes: post.extendedLikesInfo.newestLikes,\n      myStatus: PostLikeStatus.NONE,\n    };\n    return dto;\n  }\n\n  public setLike(likes: Map<string, PostLikeStatus> | PostLikeDocument) {\n    if (likes instanceof Map) {\n      const likeStatus = likes.get(this.id);\n      if (likeStatus) {\n        this.extendedLikesInfo.myStatus = likeStatus;\n      }\n      return;\n    }\n    this.extendedLikesInfo.myStatus = likes.status;\n  }\n}\n"],"names":["ExtendedLikesInfoViewModel","LikeDetailsViewModel","PostLikeStatus","PostViewDto","mapToView","post","dto","id","_id","toString","title","shortDescription","content","blogId","blogName","createdAt","toISOString","extendedLikesInfo","likesCount","dislikesCount","newestLikes","myStatus","setLike","likes","Map","likeStatus","get","status"],"mappings":";;;;;;;;;;;QAeaA;eAAAA;;QANAC;eAAAA;;QANDC;eAAAA;;QAmBCC;eAAAA;;;AAnBN,IAAA,AAAKD,wCAAAA;;;;WAAAA;;AAML,IAAA,AAAMD,uBAAN,MAAMA;AAIb;AAEO,IAAA,AAAMD,6BAAN,MAAMA;AAKb;AAEO,IAAA,AAAMG,cAAN,MAAMA;IAUX,OAAOC,UAAUC,IAAkB,EAAe;QAChD,MAAMC,MAAM,IAAIH;QAChBG,IAAIC,EAAE,GAAGF,KAAKG,GAAG,CAACC,QAAQ;QAC1BH,IAAII,KAAK,GAAGL,KAAKK,KAAK;QACtBJ,IAAIK,gBAAgB,GAAGN,KAAKM,gBAAgB;QAC5CL,IAAIM,OAAO,GAAGP,KAAKO,OAAO;QAC1BN,IAAIO,MAAM,GAAGR,KAAKQ,MAAM;QACxBP,IAAIQ,QAAQ,GAAGT,KAAKS,QAAQ;QAC5BR,IAAIS,SAAS,GAAGV,KAAKU,SAAS,CAACC,WAAW;QAC1CV,IAAIW,iBAAiB,GAAG;YACtBC,YAAYb,KAAKY,iBAAiB,CAACC,UAAU;YAC7CC,eAAed,KAAKY,iBAAiB,CAACE,aAAa;YACnDC,aAAaf,KAAKY,iBAAiB,CAACG,WAAW;YAC/CC,QAAQ;QACV;QACA,OAAOf;IACT;IAEOgB,QAAQC,KAAqD,EAAE;QACpE,IAAIA,iBAAiBC,KAAK;YACxB,MAAMC,aAAaF,MAAMG,GAAG,CAAC,IAAI,CAACnB,EAAE;YACpC,IAAIkB,YAAY;gBACd,IAAI,CAACR,iBAAiB,CAACI,QAAQ,GAAGI;YACpC;YACA;QACF;QACA,IAAI,CAACR,iBAAiB,CAACI,QAAQ,GAAGE,MAAMI,MAAM;IAChD;AACF"}